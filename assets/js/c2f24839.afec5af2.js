"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[29],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?i.createElement(f,r(r({ref:t},c),{},{components:n})):i.createElement(f,r({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},970:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(7294),a="alert_19nB",o="alertWarning_1tiz",r="alertInfo_1EfW",l="alertTip_1W6d",s="alertSuccess_7EZp",p=function(e){var t=e.children,n=e.alertType;return"warning"===n?i.createElement("div",{className:"alert "+a+" "+o,role:"alert"},t):"info"===n?i.createElement("div",{className:"alert "+a+" "+r,role:"alert"},t):"tip"===n?i.createElement("div",{className:"alert "+a+" "+l,role:"alert"},t):"success"===n?i.createElement("div",{className:"alert "+a+" "+s,role:"alert"},t):null}},3084:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return u}});var i=n(7462),a=n(3366),o=(n(7294),n(3905)),r=n(970),l={title:"Notifications"},s=void 0,p={unversionedId:"notifications",id:"notifications",isDocsHomePage:!1,title:"Notifications",description:"Notifications are available on { }",source:"@site/docs/notifications.mdx",sourceDirName:".",slug:"/notifications",permalink:"/documentation/notifications",editUrl:"https://github.com/radarlabs/docs/edit/main/docs/notifications.mdx",tags:[],version:"current",frontMatter:{title:"Notifications"},sidebar:"defaultSidebar",previous:{title:"Fraud",permalink:"/documentation/fraud"},next:{title:"Campaigns",permalink:"/documentation/campaigns"}},c=[{value:"Quickstart",id:"quickstart",children:[]},{value:"How it works",id:"how-it-works",children:[]},{value:"Analytics",id:"analytics",children:[]},{value:"Deep linking",id:"deep-linking",children:[{value:"Automated iOS setup",id:"automated-ios-setup",children:[]},{value:"Manual iOS setup",id:"manual-ios-setup",children:[]},{value:"Automated React Native setup (iOS only)",id:"automated-react-native-setup-ios-only",children:[]},{value:"Handle system deep link",id:"handle-system-deep-link",children:[]}]},{value:"Support",id:"support",children:[]}],d={toc:c};function u(e){var t=e.components,l=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,i.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(r.Z,{alertType:"info",mdxType:"Alert"},"Notifications are available on "," ",(0,o.kt)("a",{href:"https://github.com/radarlabs/radar-sdk-ios/releases/tag/3.7.6"},"iOS SDK v3.7.6")," "," and above."),(0,o.kt)("p",null,"Use Radar's on-premise notifications to display a notification on iOS devices when a user enters a geofence. Notifications work even with only foreground or ",(0,o.kt)("b",null,'"when in use"')," permissions!"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"OnPremiseNotifications",src:n(7747).Z})),(0,o.kt)("h2",{id:"quickstart"},"Quickstart"),(0,o.kt)("p",null,"First, ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/signup"},"sign up")," for Radar and get an API key."),(0,o.kt)("p",null,"Then, ",(0,o.kt)("a",{parentName:"p",href:"/geofences#create-geofences"},"create geofences")," via the dashboard, CSV import, or the API."),(0,o.kt)("p",null,"From there, add values for the following ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata")," keys to the geofences that will trigger notifications."),(0,o.kt)("h6",{id:"metadata-keys"},"Metadata keys"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationText"))," (string, required): The body text of the notification."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationTitle"))," (string, optional): The title of the notification, displayed in bold."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationSubtitle"))," (string, optional): The subtitle of the notification, displayed in bold."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationRepeats"))," (boolean, optional): Determines whether the notification should be delivered multiple times before notifications are registered again. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationURL"))," (string, optional): The URL to open when the notification is tapped. Refer to ",(0,o.kt)("a",{parentName:"li",href:"#deep-linking"},"Deep linking")," for more information.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"PumpToStoreMetadata",src:n(2166).Z})),(0,o.kt)("p",null,"Finally, ",(0,o.kt)("a",{parentName:"p",href:"/sdk/ios"},"integrate the SDK")," and call ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce()")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.startTracking()"),", depending on your use case. Make sure that the ",(0,o.kt)("inlineCode",{parentName:"p"},"syncGeofences")," ",(0,o.kt)("a",{parentName:"p",href:"/sdk/tracking#ios"},"tracking option")," is enabled. Radar will display a notification when the device is detected inside a geofence that has the above ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata")," keys."),(0,o.kt)("h2",{id:"how-it-works"},"How it works"),(0,o.kt)("p",null,"Radar's on-premise notifications make use of location notification triggers on iOS. These triggers work with foreground or ",(0,o.kt)("b",null,'"when in use"')," permissions. This feature is privacy-friendly and won't collect any additional location data. Notifications are only displayed after the user opens the app for the first time with the ",(0,o.kt)("a",{parentName:"p",href:"/documentation/sdk"},"Radar SDK")," installed."),(0,o.kt)("p",null,"No additional lines of code are necessary to power on-premise notifications. They function completely under the hood after setup. The same calls to ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.trackOnce()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Radar.startTracking()")," will return nearby geofences with notifications, which will then be registered on the device."),(0,o.kt)("p",null,"Radar only controls the registration of notifications on the device. Once that happens, surfacing notifications is subject to the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/usernotifications/unlocationnotificationtrigger#overview"},"system limits and heuristics")," that iOS enforces."),(0,o.kt)(r.Z,{alertType:"info",mdxType:"Alert"},"You need to be outside a geofence when it is registered on the device for the notification to fire upon entry."),(0,o.kt)("h2",{id:"analytics"},"Analytics"),(0,o.kt)("p",null,"With Radar ",(0,o.kt)("a",{parentName:"p",href:"/api#log-a-conversion"},"Conversions"),", you can log an event whenever a user interacts with a notification."),(0,o.kt)("p",null,"Refer to the ",(0,o.kt)("a",{parentName:"p",href:"/sdk/ios#conversions"},"iOS SDK Conversions reference")," for setup instructions."),(0,o.kt)("p",null,"With Radar ",(0,o.kt)("a",{parentName:"p",href:"/api#log-a-conversion"},"Conversions"),", you can also retrieve the source of an ",(0,o.kt)("em",{parentName:"p"},"opened_app")," conversion for iOS apps. Within the ",(0,o.kt)("em",{parentName:"p"},"metadata")," object of the ",(0,o.kt)("a",{parentName:"p",href:"/sdk/ios#conversions"},"logged conversion"),", we will return a ",(0,o.kt)("em",{parentName:"p"},"conversion_source")," with either "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"notification"))," (app was opened using an external 3rd party notification) "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar_notification"))," (app was opened using the configured on-prem notification): ")),(0,o.kt)("p",null,"You can also view these conversion analytics by navigating to Geofencing -> Analytics -> Events -> Filters (top right) -> select Type as ",(0,o.kt)("em",{parentName:"p"},"opened_app")," -> Apply Filters. From there, select ",(0,o.kt)("em",{parentName:"p"},"conversion_source")," from the ",(0,o.kt)("em",{parentName:"p"},"grouped_by")," dropdown. See screenshot below:\n",(0,o.kt)("img",{alt:"OnPremiseNotifications",src:n(3852).Z})),(0,o.kt)("h2",{id:"deep-linking"},"Deep linking"),(0,o.kt)("p",null,"Radar's on-premise notifications can be used for deep linking. This means that you can use Radar's deep linking functionality to open a specific view via on premise notification taps."),(0,o.kt)("p",null,"Set up deep linking from the Radar's Dashboards by adding the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"radar:notificationURL"))," to the ",(0,o.kt)("inlineCode",{parentName:"p"},"URL Schemes")," of the desired navigation view of your app."),(0,o.kt)("h3",{id:"automated-ios-setup"},"Automated iOS setup"),(0,o.kt)("p",null,"Radar's iOS SDK can automatically set up deep linking for you. To enable this feature, set the ",(0,o.kt)("inlineCode",{parentName:"p"},"autoHandleNotificationDeepLinks")," option to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," in the Radar ",(0,o.kt)("inlineCode",{parentName:"p"},"initialize")," call."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},'radarInitializeOptions.autoHandleNotificationDeepLinks = true\nRadar.initialize(publishableKey: "prj_test_pk_000", options: radarInitializeOptions )\n')),(0,o.kt)("p",null,"It is recommended to use the automatic setup in conjugation with the ",(0,o.kt)("inlineCode",{parentName:"p"},"RadarURLDelegate")," to handle the URL open. This implementation provides the most light way approach to get started with deep linking."),(0,o.kt)("h3",{id:"manual-ios-setup"},"Manual iOS setup"),(0,o.kt)("p",null,"If you want to set up deep linking manually, you can do so by adding the following line to your ",(0,o.kt)("inlineCode",{parentName:"p"},"UNUserNotificationCenterDelegate")," implementation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-swift"},"func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse) async {\n  Radar.openURLFromNotification(response.notification)\n}\n")),(0,o.kt)("h3",{id:"automated-react-native-setup-ios-only"},"Automated React Native setup (iOS only)"),(0,o.kt)("p",null,"Radar's React Native SDK can automatically set up deep linking for you. To enable this feature, set the ",(0,o.kt)("inlineCode",{parentName:"p"},"autoHandleNotificationDeepLinks")," option to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"radarInitializeOptions")," via the ",(0,o.kt)("inlineCode",{parentName:"p"},"AppDelegate.mm"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Objective-C"},'- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n  self.moduleName = @"main";\n  self.initialProps = @{};\n\n  BOOL res = [super application:application didFinishLaunchingWithOptions:launchOptions];\n  RadarInitializeOptions *radarInitializeOptions = [[RadarInitializeOptions alloc] init];\n  radarInitializeOptions.autoHandleNotificationDeepLinks = YES;\n  [Radar nativeSetup:radarInitializeOptions];\n  return res;\n}\n')),(0,o.kt)("h3",{id:"handle-system-deep-link"},"Handle system deep link"),(0,o.kt)("p",null,"Opening the notification will result in the SDK calling ",(0,o.kt)("inlineCode",{parentName:"p"},"[application openURL:url options:@{} completionHandler:nil];")," This will open the URL in the app if it is registered for the scheme, or open the URL in the browser if it is not.\nDevelopers should handle this by handling the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app"},"custom URL scheme")," or ",(0,o.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/xcode/supporting-universal-links-in-your-app"},"universal link")," in their app.\nReact Native developers should also implement the native iOS handling of the deep link in their app."),(0,o.kt)("h2",{id:"support"},"Support"),(0,o.kt)("p",null,"Have questions? We're here to help! Contact us at ",(0,o.kt)("a",{parentName:"p",href:"https://radar.com/support"},"radar.com/support"),"."))}u.isMDXComponent=!0},3852:function(e,t,n){t.Z=n.p+"assets/images/conversion_source_analytics-4a52cd8a87055b91f37bebaecc7f5f16.png"},7747:function(e,t,n){t.Z=n.p+"assets/images/on_premise_notifications-10ba66d28924be640d13a9e18bed6534.png"},2166:function(e,t,n){t.Z=n.p+"assets/images/pump_to_store_metadata-12b24b24e410ccfa991405eaa984fa17.png"}}]);