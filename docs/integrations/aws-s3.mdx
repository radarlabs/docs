---
title: AWS S3
---
import Alert from "../../src/components/Alert";

<Alert alertType="info">
  The AWS S3 integration is available on the {` `}
  <a href="https://radar.com/pricing" target="_blank">Enterprise plan</a>
  .
</Alert>

Radar can stream both events and locations to [AWS S3](https://aws.amazon.com/s3/).

Use the AWS S3 integration to make Radar data available in a simple object storage format within your own systems, making your locations and events data more easily accessible by your engineers and data scientists.

By having all of your event and location data in S3, you can integrate your location data with other analysis tools like AWS Athena or Snowflake. Files are delivered via an [AWS Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) as snappy-compressed parquet files.  Each `/dt=YYYY-MM-DD/` folder will have multiple files in it. This format should be consumable out-of-the-box with Apache Spark, AWS Athena, or other data engineering tools. This can enable you to build custom dashboard visualizations of data like foot traffic, trip duration, or dwell time in a location.

## Configuration

Contact your customer success manager to enable this feature.

The AWS S3 integration uses an [AWS Kinesis Data Firehose](https://aws.amazon.com/kinesis/data-firehose/) to stream new Radar locations and events. The AWS Kinesis Data Firehose flushes data to your S3 bucket after 10 minutes or 128 MB of data, whichever happens first. Additionally, [AWS KMS](https://aws.amazon.com/kms/) can be used [to encrypt Kinesis data streams server-side](https://docs.aws.amazon.com/streams/latest/dev/server-side-encryption.html).

![AWS S3 configuration diagram](/img/integrations/aws_s3_diagram.png)

### Create a bucket
Create an S3 bucket for Radar to deliver data to, for example, `s3://com.example.bucket/`. Data will be delivered to `s3://com.example.bucket/radar/events/project=$PROJECT/dt=YYYY-MM-DD/X.parquet.snappy`. Provide the name of the bucket to your customer success manager.

### Create an AWS Cross-Account IAM policy
Create an IAM Policy that allows Radar to deliver data to this bucket. To do this, implement step 2 in the [Cross-Account Delivery to an Amazon S3 Destination IAM Policy documentation](https://docs.aws.amazon.com/firehose/latest/dev/controlling-access.html#cross-account-delivery-s3). Radar will implement steps 1 and 3.  Contact your Customer Support Manager to obtain the values for the `accountA-id` and `iam-role-name` values to use in the IAM Policy.

### Location Schema
<div className="full-width-table">

| Name  | Type | Description  |
|-------|---------|-----------------|
|locationid|string|Unique ID of the location|
|userid|string|Radar ID of user|
|userexternalid|string|External ID of user|
|usermetadata|string|Metadata of the user|
|organization|string|Radar ID of the org|
|locationaccuracy|double||
|updatedat|string|Location update time|
|devicetype|string||
|live|boolean|Test / Live environment|
|foreground|boolean||
|stopped|boolean||
|sdkversion|string||
|floorlevel|double||
|altitude|double||
|verticalaccuracy|double||
|latitude|double||
|longitude|double||
|timezoneoffset|int||
|source|string||
|events|`array<string>`||
|sessionid|string||
|appstandbybucket|int||
|locationauthorization|string||
|locationaccuracyauthorization|string||
|devicemake|string||
|devicemodel|string||
|deviceos|string||
|metadata|string|Metadata such as tracking options used by the device|
|project|string||
|year|string||
|month|string||
|day|string||


</div>

### Event Schema
<div className="full-width-table">

| Name  | Type | Description  |
|-------|---------|-----------------|
|_id|string|FALSE|
|createdat|timestamp|FALSE|
|actualcreatedat|timestamp|FALSE|
|organization|string|FALSE|
|live|boolean|FALSE|
|locationaccuracy|double|FALSE|
|confidence|int|FALSE|
|place|string|FALSE|
|placecategories|string|FALSE|
|placechainname|string|FALSE|
|placechainslug|string|FALSE|
|placegroup|string|FALSE|
|placename|string|FALSE|
|alternateplaces|`array<string>`|FALSE|
|placecandidates|`array<string>`|FALSE|
|duration|double|FALSE|
|longitude|double|FALSE|
|latitude|double|FALSE|
|user|string|FALSE|
|geofence|string|FALSE|
|geofencedescription|string|FALSE|
|geofencetag|string|FALSE|
|geofenceexternalid|string|FALSE|
|region|string|FALSE|
|countryregionname|string|FALSE|
|countryregioncode|string|FALSE|
|countryregion|string|FALSE|
|dmaregion|string|FALSE|
|dmaregionname|string|FALSE|
|dmaregioncode|string|FALSE|
|stateregion|string|FALSE|
|stateregionname|string|FALSE|
|stateregioncode|string|FALSE|
|postalcoderegion|string|FALSE|
|postalcoderegioncode|string|FALSE|
|replayed|boolean|FALSE|
|type|string|FALSE|
|timezoneoffset|int|FALSE|
|trip|string|FALSE|
|beacon|string|FALSE|
|foreground|boolean|FALSE|
|locationaccuracyauthorization|string|FALSE|
|locationauthorization|string|FALSE|
|devicetype|string|FALSE|
|devicemake|string|FALSE|
|devicemodel|string|FALSE|
|deviceos|string|FALSE|
|sdkversion|string|FALSE|
|stopped|boolean|FALSE|
|beacontag|string|FALSE|
|beaconexternalid|string|FALSE|
|beacontype|string|FALSE|
|beaconmajor|string|FALSE|
|beaconminor|string|FALSE|
|beaconuuid|string|FALSE|
|tripexternalid|string|FALSE|
|tripdestinationgeofencetag|string|FALSE|
|tripdestinationgeofenceexternalid|string|FALSE|
|userexternalid|string|FALSE|
|usermetadata|string|FALSE|
|project|string|TRUE|
|year|string|TRUE|
|month|string|TRUE|
|day|string|TRUE|

</div>
